var newGalleryWidget={newGallery:jQuery("#addGallery"),newGalleryName:jQuery("#addGallery [name=name]"),newGalleryDescription:jQuery("#addGallery [name=description]"),toggleButton:jQuery("#addGalleryButton"),sendButton:jQuery("#addGallery [type=submit]"),cancelButton:jQuery("#addGallery [name=cancel]"),init:function(){this.toggleButton.on("click",function(){newGalleryWidget.newGallery.slideToggle()}),this.sendButton.on("click",function(e){newGalleryWidget.send(e)}),this.cancelButton.on("click",function(){newGalleryWidget.newGalleryName.val(""),newGalleryWidget.newGalleryDescription.val(""),newGalleryWidget.newGallery.slideToggle()})},send:function(e){e.preventDefault(),jQuery.ajax({type:"POST",url:ajaxdata.ajaxurl,data:{action:"add_gallery",name:this.newGalleryName.val(),description:this.newGalleryDescription.val()},success:function(e){jQuery(".galleryEditors").prepend(e)}})}},editGalleryWidget={widget:jQuery("#editGallery"),nameInput:jQuery("#editGallery [name=name]"),descriptionInput:jQuery("#editGallery [name=description]"),saveButton:jQuery("#editGallery [type=submit]"),cancelButton:jQuery("#editGallery [name=cancel]"),deleteButton:jQuery("#editGallery [name=delete]"),galleryData:{id:null,title:null,description:null,title_image_url:null},init:function(){jQuery(".galleryEditor [name=edit]").on("click",function(){var e=jQuery(this).parent();editGalleryWidget.galleryData.id=e.attr("data-id"),editGalleryWidget.galleryData.title=e.find("h3").text().trim(),editGalleryWidget.galleryData.description=e.find("p").text().trim(),editGalleryWidget.galleryData.title_image_url=e.find("img").attr("src"),editGalleryWidget.activate()}),this.saveButton.on("click",function(){editGalleryWidget.save()}),this.cancelButton.on("click",function(){editGalleryWidget.cancel()}),this.deleteButton.on("click",function(){editGalleryWidget.deleteGallery()})},activate:function(){this.widget.show(400),this.nameInput.val(this.galleryData.title),this.descriptionInput.val(this.galleryData.description),window.scrollTo(0,0)},save:function(){},cancel:function(){jQuery.each(this.galleryData,function(e,t){t=null}),this.widget.hide(400),this.nameInput.val(""),this.descriptionInput.val("")},deleteGallery:function(){confirm("Are you sure you want to delete the gallery? You will not be able to restore it.")&&jQuery.ajax({type:"POST",url:ajaxdata.ajaxurl,data:{action:"deleteGallery",id:this.galleryData.id},success:function(){jQuery("[data-id="+editGalleryWidget.galleryData.id+"]").hide(400),editGalleryWidget.cancel()}})}};newGalleryWidget.init(),editGalleryWidget.init();